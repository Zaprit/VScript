VSC.compileSource(){
 # If we are doing a single file compile
 if ! [ -f build.conf ]
 then
  var SRC_FILE=${1%.*}.vss
  if [ $VSC_PROG_TYPE == "lib" ]
  then
   var OUT_FILE=${1%.*}.vsl
  else
   var OUT_FILE=${1%.*}.vsa
  fi
  rm $OUT_FILE
  # Import Handling
  # Get all imports from file after making sure that we have imports.
  if [ "$VSC_APP_TYPE" == "lib"]
  then
  if [ "$(VSC.getImports $SRC_FILE)" != "" ]
  then
   for import in $(VSC.getImports "$SRC_FILE") 
   do
    # If the import actually exists
    if VSC.resolveImport "$import"
    then
     # Capture the import location, Write down that we found it, and if we haven't already imported it then import it into the class
     IMPORT_LOC=$(VSC.resolveImportPath "$import")
     if ! $(echo $ADDEDIMPORTS | grep $import)
     then 
      ADDEDIMPORTS="$ADDEDIMPORTS $import"
      cat $IMPORT_LOC >> $OUT_FILE
     fi
    fi
   done
  fi
  fi
  cat "$SRC_FILE" >> "$OUT_FILE"

  echo "loadedMods=\"n/a due to VSC compilation\"" >> $OUT_FILE
  echo "compiler=\"VSC\"" >> $OUT_FILE

  if ! [ $VSC_PROG_TYPE == "lib" ]
  then
  echo 'if [ "$1" != "--getdata" ]' >> $OUT_FILE
  echo 'then' >> $OUT_FILE
  echo 'main $@' >> $OUT_FILE
  echo 'fi' >> $OUT_FILE
  fi

  # Remove all comments from output class
  sed -i '/^#/d' $OUT_FILE
  sed -i '/^\<package\>/d' $OUT_FILE
  if [ "$VSC_APP_TYPE" == "lib" ]
  then
   sed -i '/^\<import\>/d' $OUT_FILE
  fi
  VSC.commitMetadata $OUT_FILE

 #if we are doing a project compile
 else 
  SRC_FILE=$VSC_PROG_NAME
  if [ "$VSC_PROG_TYPE" == "lib" ]
  then
   OUT_FILE=$VSC_PROG_NAME.vsl
  else
   OUT_FILE=$VSC_PROG_NAME.vsa
  fi
  # Import Handling
  # Get all imports from file after making sure that we have imports.
  if [ "$VSC_APP_TYPE" == "lib" ]
  then
  if [ "$(VSC.getImports $1)" != "" ]
  then
   for import in $(VSC.getImports "$1") 
   do
    # If the import actually exists
    if VSC.resolveImport "$import"
    then
     # Capture the import location, Write down that we found it, and if we haven't already imported it then import it into the class
     IMPORT_LOC=$(VSC.resolveImportPath "$import")
     if ! $(echo $ADDEDIMPORTS | grep $import)
     then 
     ADDEDIMPORTS="$ADDEDIMPORTS $import"
     cat $IMPORT_LOC >> $OUT_FILE
     fi
    fi
   done
  fi
  fi
  cat $1 >> $OUT_FILE

  # Remove all comments from output class
  if [ "$VSC_APP_TYPE" == "lib" ]
  then  
   sed -i '/^\<import\>/d' $OUT_FILE
  fi
  sed -i '/^\<package\>/d' $OUT_FILE
  sed -i '/^#/d' $OUT_FILE    
  echo "loadedLibs=\"$(echo $ADDEDIMPORTS | tr " " "\n")\"" >> $OUT_FILE
  echo "loadedMods=\"n/a due to VSC compilation\"" >> $OUT_FILE
  echo "compiler=\"VSC\"" >> $OUT_FILE

  if ! [ $VSC_PROG_TYPE == "lib" ]
  then
   echo 'if [ "$1" != "--getdata" ]' >> $OUT_FILE
   echo 'then' >> $OUT_FILE
   echo 'main $@' >> $OUT_FILE
   echo 'fi' >> $OUT_FILE
  fi
 fi
}
